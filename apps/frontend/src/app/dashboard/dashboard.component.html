<div class="dashboard">
  <ph-topbar style="grid-row: 1; grid-column: 2;">
    <ph-topbar-header [title]="view" [subtitle]="tab"></ph-topbar-header>
  </ph-topbar>
  <ph-sidebar style="grid-row: 1 / 3; grid-column: 1;">
    <ph-sidebar-item>
      CLOAK
    </ph-sidebar-item>
  </ph-sidebar>

  <div class="content">
    <div class="workspace">
      @if (this.tab == 'CLOAK' && auth.username=='sci') {
        <ph-window [title]="'CONSENS INFERENCE TARGET MATRIX'" style="grid-row-start: 1;">
          <ph-bar-chart-3d [data]="targetData"></ph-bar-chart-3d>
        </ph-window>
      }
      @if (this.tab == 'CLOAK' && auth.username=='sci') {
        <ph-window [title]="'CONSENS INFERENCE MATRIX'" style="grid-row-start: 2;">
          <ph-bar-chart-3d [data]="data"></ph-bar-chart-3d>
        </ph-window>
      }
      @if (this.tab == 'CLOAK' && auth.username=='sci') {
        <ph-window [title]="'CLUSTER MIXING MATRIX'" style="flex-grow: 1; grid-row: span 2">
          <ph-cloak-cluster-matrix (matrixChange)="onMatrixChange($event)"></ph-cloak-cluster-matrix>
        </ph-window>
      }
      @if (this.tab == 'CLOAK' && auth.username=='tec') {
        <ph-window [title]="'CLUSTER POWER'" style="grid-row: span 2">
          <phobos-cloak-power-total [power]="totalPower"></phobos-cloak-power-total>
        </ph-window>
      }
      @if (this.tab == 'CLOAK' && auth.username=='tec') {
        <ph-window [title]="'CLUSTER PHASE POWER'" style="grid-row: span 2">
          <ph-cloak-phase-power (powerChange)="onPowerChange($event)"></ph-cloak-phase-power>
        </ph-window>
      }
    </div>
  </div>
</div>
